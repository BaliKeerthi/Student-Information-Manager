<!DOCTYPE html>
<html>
<head>
<style>
.close-btn{
  top:43%;left:50%;transform:translate(-50%,-50%);
  width:400px;padding:25px;
  background:linear-gradient(#dff5fc,#a8e0f9);
  border:1.5px solid #2ac3ff;
  display:none;position:fixed;z-index:1001;
  border-radius:30px 0;
}
#hee{position:absolute;top:-10px;right:-10px;width:18px;cursor:pointer}
#overlay{position:fixed;top:0;left:0;width:100%;height:100%;
  background:rgba(0,0,0,.4);display:none}
body{background:#e9fafd;font-family:sans-serif}
table{border-collapse:collapse;width:80%;margin:auto}
th,td{border:1px solid #ccc;padding:10px}
tr:nth-child(even){background:#d5e6f7}
tr:nth-child(odd){background:#ecf3fa}
.add{float:right}
.action-img{cursor:pointer;margin-right:5px}
.forminline{display:flex;margin-bottom:15px}
.forminline label{width:130px;font-weight:bold}
.forminline input,select{flex:1;padding:8px}
.form-buttons{text-align:center;margin-top:20px}
#k{background:#7caf29;color:white}
#k1{background:#c93030;color:white}
</style>
</head>

<body>
<h2 align="center">Students Information</h2>

<table>
<thead>
<tr style="background:#0d7aa6;color:white">
<td colspan="6">
<b>Student List</b>
<div class="add">
<img src="https://cdn-icons-png.flaticon.com/16/748/748113.png" onclick="addBtn()">
<a href="#" onclick="addBtn();return false" style="color:white">Add</a>
</div>
</td>
</tr>
<tr style="background:#43b1d5;color:white">
<th>S.No</th><th>Name</th><th>E-mail</th>
<th>Qualification</th><th>Created On</th><th>Action</th>
</tr>
</thead>
<tbody id="demo"></tbody>
</table>

<div id="overlay"></div>

<div class="close-btn">
<img id="hee" src="https://cdn-icons-png.flaticon.com/16/1828/1828843.png" onclick="closeForm()">
<form id="studentForm">
<div class="forminline">
<label>Name *</label><input id="name">
</div>
<div class="forminline">
<label>Email *</label><input id="email">
</div>
<div class="forminline">
<label>Qualification</label>
<select id="qualification">
<option value="">--Select--</option>
<option>MCA</option><option>BE</option><option>B.Tech</option>
</select>
</div>
<div class="form-buttons">
<input id="k" type="submit" value="Submit">
<input id="k1" type="reset" value="Reset">
</div>
</form>
</div>

<script>
let editRow=null;

/* âœ… XML LOAD FIX (WORKS ON VERCEL) */
fetch("./StudentsData.xml")
.then(res=>res.text())
.then(str=>{
  let xml=new DOMParser().parseFromString(str,"application/xml");
  loadXML(xml);
});

function loadXML(xml){
  let students=xml.getElementsByTagName("student");
  for(let s of students){
    addRow(
      s.getElementsByTagName("name")[0].textContent,
      s.getElementsByTagName("email")[0].textContent,
      s.getElementsByTagName("Qualification")[0].textContent,
      s.getElementsByTagName("creation")[0].textContent
    );
  }
}

function addRow(n,e,q,d){
  let r=document.getElementById("demo").insertRow();
  r.innerHTML=`
  <td></td><td>${n}</td><td>${e}</td><td>${q}</td><td>${d}</td>
  <td>
    <img class="action-img" src="https://cdn-icons-png.flaticon.com/16/1159/1159633.png" onclick="edit(this)">
    <img class="action-img" src="https://cdn-icons-png.flaticon.com/16/1214/1214428.png" onclick="del(this)">
  </td>`;
  updateSN();
}

function updateSN(){
  [...demo.rows].forEach((r,i)=>r.cells[0].innerText=i+1);
}

function edit(el){
  editRow=el.closest("tr");
  name.value=editRow.cells[1].innerText;
  email.value=editRow.cells[2].innerText;
  qualification.value=editRow.cells[3].innerText;
  openForm();
}

function del(el){
  if(confirm("Delete?")){
    el.closest("tr").remove();updateSN();
  }
}

function addBtn(){editRow=null;studentForm.reset();openForm();}
function openForm(){overlay.style.display="block";document.querySelector(".close-btn").style.display="block"}
function closeForm(){overlay.style.display="none";document.querySelector(".close-btn").style.display="none"}

studentForm.onsubmit=e=>{
e.preventDefault();
if(editRow){
  editRow.cells[1].innerText=name.value;
  editRow.cells[2].innerText=email.value;
  editRow.cells[3].innerText=qualification.value;
}else{
  addRow(name.value,email.value,qualification.value,new Date().toISOString().split("T")[0]);
}
closeForm();
};
</script>
</body>
</html>





