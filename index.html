<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Students Information</title>

  <style>
    body {
      background-color: #e9fafd;
      font-family: Arial, sans-serif;
    }

    h2 {
      text-align: center;
    }

    table, tr, th, td {
      border: 1px solid #cccccc;
      border-collapse: collapse;
      margin: auto;
      padding: 10px;
    }

    tr:nth-child(even) {
      background-color: #d5e6f7;
    }

    tr:nth-child(odd) {
      background-color: #ecf3fa;
    }

    #k5 {
      background-color: #43b1d5;
      color: white;
    }

    .add {
      float: right;
      margin-right: 10px;
    }

    img {
      cursor: pointer;
      background-color: white;
    }

    /* Popup */
    .close-btn {
      position: fixed;
      top: 43%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 400px;
      padding: 25px;
      background: linear-gradient(#dff5fc, #a8e0f9);
      border: 1.5px solid #2ac3ff;
      display: none;
      z-index: 1001;
      border-radius: 30px 0px 30px 0px;
    }

    #overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.4);
      display: none;
      z-index: 1000;
    }

    .forminline {
      display: flex;
      align-items: center;
      margin-bottom: 15px;
    }

    .forminline label {
      width: 130px;
      font-weight: bold;
    }

    .forminline input,
    .forminline select {
      flex: 1;
      padding: 8px;
      border: 1px solid #0077aa;
      border-radius: 4px;
    }

    .form-buttons {
      text-align: center;
      margin-top: 20px;
    }

    .form-buttons input {
      width: 90px;
      padding: 10px;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }

    #k {
      background: #7caf29;
    }

    #k1 {
      background: #c93030;
    }

    #hee {
      position: absolute;
      top: -18px;
      right: -18px;
      width: 18px;
    }

    #helpTips {
      display: none;
      background: #ffffcc;
      border: 1px solid #ccc;
      padding: 8px;
      margin-bottom: 10px;
    }

    b, li {
      color: red;
    }
  </style>
</head>

<body>

<h2>Students Information</h2>

<table>
  <tr>
    <td colspan="6" style="background:#1da1d6;color:white">
      <strong>Student List</strong>
      <div class="add">
        <img src="./resources/user_add.png" width="16" onclick="addBtn()">
        <a href="#" onclick="addBtn();return false" style="color:white">Add</a>
      </div>
    </td>
  </tr>
  <tbody id="demo"></tbody>
</table>

<div id="overlay"></div>

<div class="close-btn">
  <img src="./resources/cancel.png" id="hee" onclick="closeForm()">

  <div id="helpTips"></div>

  <form id="studentForm">
    <div class="forminline">
      <label>Name *</label>
      <input type="text" id="name">
      <img src="./resources/Help.png" width="18">
    </div>

    <div class="forminline">
      <label>Email *</label>
      <input type="text" id="email">
      <img src="./resources/Help.png" width="18">
    </div>

    <div class="forminline">
      <label>Qualification</label>
      <select id="qualification">
        <option value="">--Select--</option>
        <option>MCA</option>
        <option>BE</option>
        <option>B.Tech</option>
      </select>
      <img src="./resources/Help.png" width="18">
    </div>

    <div class="form-buttons">
      <input type="submit" id="k" value="Submit">
      <input type="reset" id="k1" value="Reset">
    </div>
  </form>
</div>

<script>
  let editRow = null;

  const xhr = new XMLHttpRequest();
  xhr.onreadystatechange = function () {
    if (this.readyState === 4) {
      if (this.status === 200 && this.responseXML) {
        loadData(this.responseXML);
      } else {
        document.getElementById("demo").innerHTML =
          "<tr><td colspan='6'>Failed to load XML data</td></tr>";
      }
    }
  };
  xhr.open("GET", "./StudentsData.xml", true);
  xhr.send();

  function loadData(xml) {
    let students = xml.getElementsByTagName("student");
    let html = "<tr id='k5'><th>S.No</th><th>Name</th><th>Email</th><th>Qualification</th><th>Date</th><th>Action</th></tr>";

    for (let i = 0; i < students.length; i++) {
      html += `<tr>
        <td>${i + 1}</td>
        <td>${students[i].getElementsByTagName("name")[0].textContent}</td>
        <td>${students[i].getElementsByTagName("email")[0].textContent}</td>
        <td>${students[i].getElementsByTagName("Qualification")[0].textContent}</td>
        <td>${students[i].getElementsByTagName("creation")[0].textContent}</td>
        <td>
          <img src="./resources/user_edit.png" width="16" onclick="editRowData(this)">
          <img src="./resources/cancel.png" width="16" onclick="deleteRow(this)">
        </td>
      </tr>`;
    }
    document.getElementById("demo").innerHTML = html;
  }

  function addBtn() {
    editRow = null;
    document.getElementById("studentForm").reset();
    document.querySelector(".close-btn").style.display = "block";
    document.getElementById("overlay").style.display = "block";
  }

  function closeForm() {
    document.querySelector(".close-btn").style.display = "none";
    document.getElementById("overlay").style.display = "none";
  }

  function editRowData(el) {
    editRow = el.closest("tr");
    document.getElementById("name").value = editRow.cells[1].innerText;
    document.getElementById("email").value = editRow.cells[2].innerText;
    document.getElementById("qualification").value = editRow.cells[3].innerText;
    addBtn();
  }

  function deleteRow(el) {
    if (confirm("Delete this record?")) {
      el.closest("tr").remove();
    }
  }

  document.getElementById("studentForm").addEventListener("submit", function (e) {
    e.preventDefault();
    closeForm();
  });
</script>

</body>
</html>

